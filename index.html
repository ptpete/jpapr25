<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sync Checkboxes</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
  <h1>Syncing Checkboxes Across Devices</h1>
  
  <div id="checkboxes">
    <!-- Dynamically generated checkboxes will appear here -->
  </div>

  <button onclick="addCheckbox()">Add New Checkbox</button>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCAbCD5eLXKW-izbCmVOpA-9jAjcLSN3b4",
      authDomain: "jpapr25.firebaseapp.com",
      projectId: "jpapr25",
      storageBucket: "jpapr25.firebasestorage.app",
      messagingSenderId: "664046829915",
      appId: "1:664046829915:web:7d16ace7d82bf918295a7e"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Function to update checkbox state in the database
    function updateCheckbox(checkboxId, checkedState) {
      const checkboxRef = db.ref('checkboxes/' + checkboxId);
      checkboxRef.set({
        checked: checkedState
      });
    }

    // Function to add a new checkbox to the Firebase database
    function addCheckbox() {
      const newCheckboxRef = db.ref('checkboxes').push(); // Create a new checkbox with a unique ID
      newCheckboxRef.set({
        checked: false
      });
    }

    // Function to create and display checkbox elements
    function createCheckboxElement(checkboxId, checked) {
      const checkboxElement = document.createElement('div');
      checkboxElement.innerHTML = `
        <input type="checkbox" id="${checkboxId}" ${checked ? 'checked' : ''} />
        <label for="${checkboxId}">${checkboxId}</label>
      `;
      document.getElementById('checkboxes').appendChild(checkboxElement);

      // Attach event listener to sync checkbox state with Firebase
      const checkbox = document.getElementById(checkboxId);
      checkbox.addEventListener('change', (event) => {
        updateCheckbox(checkboxId, event.target.checked);
      });
    }

    // Function to load checkboxes from Firebase
    function loadCheckboxes() {
      const checkboxesRef = db.ref('checkboxes');
      
      // Listen for newly added checkboxes
      checkboxesRef.on('child_added', (snapshot) => {
        const checkboxId = snapshot.key;
        const checkedState = snapshot.val().checked;
        createCheckboxElement(checkboxId, checkedState);
      });

      // Listen for changes to existing checkboxes
      checkboxesRef.on('child_changed', (snapshot) => {
        const checkboxId = snapshot.key;
        const checkedState = snapshot.val().checked;
        const checkbox = document.getElementById(checkboxId);
        if (checkbox) {
          checkbox.checked = checkedState;
        }
      });
    }

    // Load checkboxes when the page is loaded
    window.onload = loadCheckboxes;
  </script>
</body>
</html>
