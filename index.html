<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkbox Sync</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
  <h1>Syncing Checkboxes Across Devices</h1>

  <div id="checkboxes">
    <!-- Dynamically generated checkboxes will appear here -->
  </div>

  <button onclick="addCheckbox()">Add New Checkbox</button>

  <script>
    // Firebase configuration (Replace with your config)
    const firebaseConfig = {
      apiKey: "AIzaSyCAbCD5eLXKW-izbCmVOpA-9jAjcLSN3b4",
      authDomain: "jpapr25.firebaseapp.com",
      projectId: "jpapr25",
      storageBucket: "jpapr25.firebasestorage.app",
      messagingSenderId: "664046829915",
      appId: "1:664046829915:web:7d16ace7d82bf918295a7e"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Function to update the checkbox in the database
    function updateCheckbox(checkboxId, checkedState) {
      const checkboxRef = db.ref('checkboxes/' + checkboxId);
      checkboxRef.set({
        checked: checkedState
      });
    }

    // Function to add a new checkbox
    function addCheckbox() {
      const newCheckboxRef = db.ref('checkboxes').push(); // Create new checkbox
      newCheckboxRef.set({
        checked: false
      });
    }

    // Function to create checkbox elements dynamically
    function createCheckboxElement(checkboxId, checked) {
      const checkboxElement = document.createElement('div');
      checkboxElement.innerHTML = `
        <input type="checkbox" id="${checkboxId}" ${checked ? 'checked' : ''} />
        <label for="${checkboxId}">${checkboxId}</label>
      `;
      document.getElementById('checkboxes').appendChild(checkboxElement);

      // Attach event listener to sync the checkbox state in the database
      const checkbox = document.getElementById(checkboxId);
      checkbox.addEventListener('change', (event) => {
        updateCheckbox(checkboxId, event.target.checked);
      });
    }

    // Function to fetch and display checkboxes from Firebase
    function loadCheckboxes() {
      const checkboxesRef = db.ref('checkboxes');
      checkboxesRef.on('child_added', (snapshot) => {
        const checkboxId = snapshot.key;
        const checkedState = snapshot.val().checked;
        createCheckboxElement(checkboxId, checkedState);
      });

      checkboxesRef.on('child_changed', (snapshot) => {
        const checkboxId = snapshot.key;
        const checkedState = snapshot.val().checked;
        const checkbox = document.getElementById(checkboxId);
        if (checkbox) {
          checkbox.checked = checkedState;
        }
      });
    }

    // Load checkboxes when the page loads
    window.onload = loadCheckboxes;
  </script>
</body>
</html>
